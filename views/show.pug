extends layout
append head
  script(src='/javascripts/show.js' type='module')
  link(rel="stylesheet", href="/stylesheets/star.css")
include utils
block content
  div
    img(src=show.imageURL)
  div
    h1= show.title
  div
    h2 Number of seasons: #{show.numberOfSeasons}
    h3 Year released: #{show.yearRealeased}
  div
    p= show.synopsis
  div(class="container-ratings" id=show.id)
    if user
      a(href=`/shows/${show.id}/reviews`) Write a review?
      +stars()
      select(name="showShelves" class="showShelfSelect")
        each shelf in shelves
          option(value=shelf.id class="showShelfOption" )= shelf.title
      button(type="click" class="addToShowShelfBtn" value = user.id id=show.id) Add to Shelf
    else
      a(href='/users/signup') Sign up to review!
  div
    p(id='rating')= avgRating
      span avg. Rating
  div
    iframe(width="420" height="300" src=show.youtubeVideoURL  frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen)
  div
    each review in reviews
      div(id=review.showId)
        h3=review.title
        h4=review.User.fullName
        p=review.comment
        if user  && user.id  === review.userId
          button(class="delete-review" id=review.id) Delete
          button(class="edit-review" id=review.id) Edit
